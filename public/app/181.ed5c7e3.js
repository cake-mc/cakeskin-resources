(self.webpackChunkblessing_skin_server=self.webpackChunkblessing_skin_server||[]).push([[181],{2031:function(n,e,t){"use strict";t.r(e),t.d(e,{launch:function(){return S}});var o=t(5893),i=t(3804),s=t(7196),r=t.n(s),a=t(574),c=t(2320),l=t(2617),d=t(5810),u=t(1193),m=t.n(u),p=t(3601),f=t(8426),h=t(9439),v=t.n(h),g=t(6703);function w(n){return{write:e=>(n.print(e.replace(/\n/g,"\r\n")),!0)}}var x=t(6615);const{dots:b}=x;class y{constructor(n){Object.defineProperty(this,"stdio",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"timerId",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:0})}start(n=""){this.timerId=window.setInterval((()=>{this.index+=1,this.index%=b.frames.length,this.stdio.reset(),this.stdio.print(`${b.frames[this.index]} ${n}`)}),b.interval)}stop(n=""){clearInterval(this.timerId),this.stdio.reset(),this.stdio.println(n),this.stdio.print("[?25h")}}async function j(n,e){const t=new y(e);t.start("Installing plugin...");const{message:o,data:i}=await g.v_("/admin/plugins/market/download",{name:n});t.stop(`  ${o}`);const s=null==i?void 0:i.reason;s&&e.println(s.map((n=>`- ${n}`)).join("\r\n"))}async function $(n,e){const{confirm:t}=await v()({name:"confirm",type:"confirm",message:`Are you sure to remove plugin "${n}"?`,stdin:{on(n,e){"keypress"===n&&(this._off=p.on("terminalKeyPress",(n=>{e(n,n)})))},isTTY:!0,setRawMode(){},removeListener(){this._off()}},stdout:w(e)});if(!t)return;const o=new y(e);o.start("Uninstalling plugin...");const{message:i}=await g.v_("/admin/plugins/manage",{action:"delete",name:n});o.stop(`  ${i}`)}async function k(n,e){const t=(0,f.ZP)("apt");t.help(),t.command("install <plugin>","install a new plugin").action((e=>j(e,n))),t.command("upgrade <plugin>","upgrade an existed plugin").action((e=>j(e,n))),t.command("remove <plugin>","remove a plugin").action((e=>$(e,n))),t.parse(["",""].concat(e),{run:!1}),await t.runMatchedCommand()}async function C(n,e){const t=(0,f.ZP)("closet");t.help(),t.command("add <uid> <tid>","add texture to someone's closet").action((async(e,t)=>{const{code:o,data:i}=await g.v_(`/admin/closet/${e}`,{tid:t});if(0===o){const{texture:e,user:t}=i;n.println(`Texture "${e.name}" was added to user ${t.nickname}'s closet.`)}else n.println("Error occurred.")})),t.command("remove <uid> <tid>","remove texture from someone's closet").action((async(e,t)=>{const{code:o,data:i}=await g.IV(`/admin/closet/${e}`,{tid:t});if(0===o){const{texture:e,user:t}=i;n.println(`Texture "${e.name}" was removed from user ${t.nickname}'s closet.`)}else n.println("Error occurred.")})),t.parse(["",""].concat(e),{run:!1}),await t.runMatchedCommand()}async function P(n,e){const t=(0,f.ZP)("dnf");t.help(),t.command("install <plugin>","install a new plugin").action((e=>j(e,n))),t.command("upgrade <plugin>","upgrade an existed plugin").action((e=>j(e,n))),t.command("remove <plugin>","remove a plugin").action((e=>$(e,n))),t.parse(["",""].concat(e),{run:!1}),await t.runMatchedCommand()}async function O(n,e){if(0===e.length)return void n.println("error: no operation specified (use -h for help)");const t=(0,f.ZP)("pacman");t.help(),t.option("-S, --sync <plugin>","install or upgrade a plugin"),t.option("-R, --remove <plugin>","remove a plugin");const{options:o}=t.parse(["",""].concat(e),{run:!1}),i=o;i.sync?await j(i.sync,n):i.remove&&await $(i.remove,n)}async function _(n,e){const t=(0,f.ZP)("rm");t.help(),t.command("<file>").option("-f, --force","ignore nonexistent files and arguments, never prompt").option("-r, --recursive","remove directories and their contents recursively").option("--no-preserve-root","do not treat '/' specially");const o=t.parse(["",""].concat(e),{run:!1}).options,i=t.args[0];i||o.help||(n.println("rm: missing operand"),n.println("Try 'rm --help' for more information.")),o.force&&o.recursive&&(null==i?void 0:i.startsWith("/"))&&await g.v_("/admin/resource?clear-cache")}var I=t(550);let N=!1;const E=a.Z.div`
  z-index: 1040;
  position: fixed;
  bottom: 7vh;
  user-select: none;

  .card-body {
    background-color: #000;
  }

  ${I.tS(I.Uo.xl)} {
    left: 25vw;
    width: 50vw;
    height: 50vh;
  }

  ${I.vX(I.Uo.md,I.Uo.xl)} {
    left: 5vw;
    width: 90vw;
    height: 40vh;
  }

  ${I.Qj(I.Uo.md)} {
    left: 1vw;
    width: 98vw;
    height: 35vh;
  }
`,M=n=>{const e=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const n=e.current;if(!n)return;const t=new c.Terminal,o=new l.FitAddon;t.loadAddon(o),t.setOption("fontFamily",'Monaco, Consolas, "Roboto Mono", "Noto Sans", "Droid Sans Mono"'),t.open(n),o.fit();const i=new Map;i.set("apt",k),i.set("closet",C),i.set("dnf",P),i.set("pacman",O),i.set("rm",_),p.j("registerCLIPrograms",i);const s=new d.N2(t);i.forEach(((n,e)=>{s.addExternal(e,n)}));const r=console.log;console.log=(n,...e)=>{const o=(new Error).stack;(null==o?void 0:o.includes("outputHelp"))?t.writeln(n.replace(/\n/g,"\r\n")):r(n,...e)};const a=t.onData((n=>s.input(n))),u=t.onKey((n=>p.j("terminalKeyPress",n.key)));return N=!0,()=>{a.dispose(),u.dispose(),s.free(),o.dispose(),t.dispose(),console.log=r,N=!1}}),[]),(0,o.jsx)(m(),Object.assign({handle:".card-header"},{children:(0,o.jsxs)(E,Object.assign({className:"card"},{children:[(0,o.jsx)("div",Object.assign({className:"card-header"},{children:(0,o.jsxs)("div",Object.assign({className:"d-flex justify-content-between"},{children:[(0,o.jsx)("h4",Object.assign({className:"card-title d-flex align-items-center"},{children:"Blessing Skin Shell"}),void 0),(0,o.jsx)("button",Object.assign({className:"btn btn-default",onClick:n.onClose},{children:"Ã—"}),void 0)]}),void 0)}),void 0),(0,o.jsx)("div",{className:"card-body p-2",ref:e},void 0)]}),void 0)}),void 0)};function S(){if(N)return;const n=document.createElement("div");document.body.appendChild(n),r().render((0,o.jsx)(M,{onClose:()=>{r().unmountComponentAtNode(n),n.remove()}},void 0),n)}},7912:function(n,e,t){"use strict";function o(){}function i(){return{pause(){},resume(){},close(){}}}t.r(e),t.d(e,{emitKeypressEvents:function(){return o},createInterface:function(){return i}})},550:function(n,e,t){"use strict";var o;function i(n){return`@media (max-width: ${n}px)`}function s(n,e){return`@media (min-width: ${n}px) and (max-width: ${e}px)`}function r(n){return`@media (min-width: ${n}px)`}t.d(e,{Uo:function(){return o},Qj:function(){return i},vX:function(){return s},tS:function(){return r}}),function(n){n[n.xs=0]="xs",n[n.sm=576]="sm",n[n.md=768]="md",n[n.lg=992]="lg",n[n.xl=1200]="xl"}(o||(o={}))}}]);