(self.webpackChunkblessing_skin_server=self.webpackChunkblessing_skin_server||[]).push([[690],{8690:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return C}});var i=a(5893),n=a(3804),d=a(1570),t=a(57),r=a(9972),l=a(88),c=a(6703),o=a(439),v=a(8848),j=a(9147),m=a(7894),h=a(574),x=a(550);const g=h.Z.div`
  width: 48%;
  margin: 7px;

  ${x.Qj(x.Uo.lg)} {
    width: 98%;
  }
`;var p=e=>{const{player:s}=e;return(0,i.jsxs)(g,Object.assign({className:"info-box"},{children:[(0,i.jsx)("div",Object.assign({className:"info-box-icon"},{children:(0,i.jsx)("img",{className:"bs-avatar",src:`${blessing.base_url}/avatar/player/${s.name}`},void 0)}),void 0),(0,i.jsxs)("div",Object.assign({className:"info-box-content"},{children:[(0,i.jsxs)("div",Object.assign({className:"row"},{children:[(0,i.jsx)("div",Object.assign({className:"col-10"},{children:(0,i.jsx)("b",{children:s.name},void 0)}),void 0),(0,i.jsx)("div",Object.assign({className:"col-2"},{children:(0,i.jsxs)("div",Object.assign({className:"float-right dropdown"},{children:[(0,i.jsx)("a",Object.assign({className:"text-gray",href:"#","data-toggle":"dropdown","aria-expanded":"false"},{children:(0,i.jsx)("i",{className:"fas fa-cog"},void 0)}),void 0),(0,i.jsxs)("div",Object.assign({className:"dropdown-menu dropdown-menu-right"},{children:[(0,i.jsxs)("a",Object.assign({href:"#",className:"dropdown-item",onClick:()=>{(0,o.K)({mode:"alert",title:(0,l.t)("general.player.previews"),children:(0,i.jsxs)("div",Object.assign({className:"row"},{children:[(0,i.jsx)("div",Object.assign({className:"col-6 d-flex justify-content-center"},{children:s.tid_skin>0&&(0,i.jsx)("a",Object.assign({href:`${blessing.base_url}/skinlib/show/${s.tid_skin}`,target:"_blank"},{children:(0,i.jsx)("img",{src:`${blessing.base_url}/preview/${s.tid_skin}`,alt:`${s.name} - ${(0,l.t)("general.skin")}`,width:"128"},void 0)}),void 0)}),void 0),(0,i.jsx)("div",Object.assign({className:"col-6 d-flex justify-content-center"},{children:s.tid_cape>0&&(0,i.jsx)("a",Object.assign({href:`${blessing.base_url}/skinlib/show/${s.tid_cape}`,target:"_blank"},{children:(0,i.jsx)("img",{src:`${blessing.base_url}/preview/${s.tid_cape}`,alt:`${s.name} - ${(0,l.t)("general.cape")}`,width:"128"},void 0)}),void 0)}),void 0)]}),void 0)})}},{children:[(0,i.jsx)("i",{className:"fas fa-eye mr-2"},void 0),(0,l.t)("general.player.previews")]}),void 0),(0,i.jsx)("div",{className:"dropdown-divider"},void 0),(0,i.jsxs)("a",Object.assign({href:"#",className:"dropdown-item",onClick:e.onUpdateName},{children:[(0,i.jsx)("i",{className:"fas fa-signature mr-2"},void 0),(0,l.t)("admin.changePlayerName")]}),void 0),(0,i.jsxs)("a",Object.assign({href:"#",className:"dropdown-item",onClick:e.onUpdateOwner},{children:[(0,i.jsx)("i",{className:"fas fa-user-edit mr-2"},void 0),(0,l.t)("admin.changeOwner")]}),void 0),(0,i.jsxs)("a",Object.assign({href:"#",className:"dropdown-item",onClick:e.onUpdateTexture},{children:[(0,i.jsx)("i",{className:"fas fa-tshirt mr-2"},void 0),(0,l.t)("admin.changeTexture")]}),void 0),(0,i.jsx)("div",{className:"dropdown-divider"},void 0),(0,i.jsxs)("a",Object.assign({href:"#",className:"dropdown-item dropdown-item-danger",onClick:e.onDelete},{children:[(0,i.jsx)("i",{className:"fas fa-trash mr-2"},void 0),(0,l.t)("admin.deletePlayer")]}),void 0)]}),void 0)]}),void 0)}),void 0)]}),void 0),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("span",Object.assign({className:"mr-2"},{children:["PID: ",s.pid]}),void 0),(0,i.jsxs)("span",{children:[(0,l.t)("general.player.owner"),": ",s.uid]},void 0)]},void 0),(0,i.jsx)("div",{children:(0,i.jsxs)("small",Object.assign({className:"text-gray"},{children:[`${(0,l.t)("general.player.last-modified")}: `,s.last_modified]}),void 0)},void 0)]},void 0)]}),void 0)]}),void 0)},b=a(1655);const u=(0,h.Z)(b.ZP)`
  width: ${e=>e.width};
`;var N=()=>(0,i.jsxs)(g,Object.assign({className:"info-box"},{children:[(0,i.jsx)("div",Object.assign({className:"info-box-icon"},{children:(0,i.jsx)(b.ZP,{circle:!0,height:50,width:50},void 0)}),void 0),(0,i.jsxs)("div",Object.assign({className:"info-box-content"},{children:[(0,i.jsxs)("div",Object.assign({className:"row"},{children:[(0,i.jsx)("div",Object.assign({className:"col-10"},{children:(0,i.jsx)(u,{width:"120px"},void 0)}),void 0),(0,i.jsx)("div",{className:"col-2"},void 0)]}),void 0),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{children:(0,i.jsx)(u,{width:"150px"},void 0)},void 0),(0,i.jsx)("div",{children:(0,i.jsx)(u,{width:"180px"},void 0)},void 0)]},void 0)]}),void 0)]}),void 0),f=a(3291),w=e=>{const{player:s}=e;return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:s.pid},void 0),(0,i.jsxs)("td",{children:[s.name,(0,i.jsx)("span",Object.assign({className:"ml-1"},{children:(0,i.jsx)(f.Z,{title:(0,l.t)("admin.changePlayerName"),onClick:e.onUpdateName},void 0)}),void 0)]},void 0),(0,i.jsxs)("td",{children:[s.uid,(0,i.jsx)("span",Object.assign({className:"ml-1"},{children:(0,i.jsx)(f.Z,{title:(0,l.t)("admin.changeOwner"),onClick:e.onUpdateOwner},void 0)}),void 0)]},void 0),(0,i.jsxs)("td",{children:[s.tid_skin>0&&(0,i.jsx)("a",Object.assign({href:`${blessing.base_url}/skinlib/show/${s.tid_skin}`,target:"_blank",className:"mr-1"},{children:(0,i.jsx)("img",{src:`${blessing.base_url}/preview/${s.tid_skin}`,alt:`${s.name} - ${(0,l.t)("general.skin")}`,width:"64"},void 0)}),void 0),s.tid_cape>0&&(0,i.jsx)("a",Object.assign({href:`${blessing.base_url}/skinlib/show/${s.tid_cape}`,target:"_blank"},{children:(0,i.jsx)("img",{src:`${blessing.base_url}/preview/${s.tid_cape}`,alt:`${s.name} - ${(0,l.t)("general.cape")}`,width:"64"},void 0)}),void 0)]},void 0),(0,i.jsx)("td",{children:s.last_modified},void 0),(0,i.jsxs)("td",Object.assign({className:"d-flex flex-wrap"},{children:[(0,i.jsx)("button",Object.assign({className:"btn btn-default mr-2",onClick:e.onUpdateTexture},{children:(0,l.t)("admin.changeTexture")}),void 0),(0,i.jsx)("button",Object.assign({className:"btn btn-danger",onClick:e.onDelete},{children:(0,l.t)("admin.deletePlayer")}),void 0)]}),void 0)]},void 0)};const y=(0,h.Z)(b.ZP)`
  line-height: 2;
`;var O=()=>(0,i.jsx)("tr",{children:(0,i.jsx)("td",Object.assign({colSpan:6},{children:(0,i.jsx)(y,{},void 0)}),void 0)},void 0),k=a(7109),_=a(2794),$=e=>{const[s,a]=(0,n.useState)("skin"),[d,t]=(0,n.useState)(""),r=e=>{a(e.target.value)};return(0,i.jsxs)(_.Z,Object.assign({show:e.open,center:!0,title:(0,l.t)("admin.changeTexture"),onConfirm:()=>{e.onSubmit(s,Number.parseInt(d)),a("skin"),t("")},onClose:()=>{a("skin"),t(""),e.onClose()}},{children:[(0,i.jsxs)("div",Object.assign({className:"form-group"},{children:[(0,i.jsx)("label",{children:(0,l.t)("admin.textureType")},void 0),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",Object.assign({className:"mr-5"},{children:[(0,i.jsx)("input",{className:"mr-1",type:"radio",value:"skin",checked:"skin"===s,onChange:r},void 0),(0,l.t)("general.skin")]}),void 0),(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{className:"mr-1",type:"radio",value:"cape",checked:s===k.N.Cape,onChange:r},void 0),(0,l.t)("general.cape")]},void 0)]},void 0)]}),void 0),(0,i.jsxs)("div",Object.assign({className:"form-group"},{children:[(0,i.jsx)("label",Object.assign({htmlFor:"update-texture-tid"},{children:"TID"}),void 0),(0,i.jsx)("input",{type:"number",id:"update-texture-tid",className:"form-control",placeholder:(0,l.t)("admin.pidNotice"),value:d,onChange:e=>{t(e.target.value)}},void 0)]}),void 0)]}),void 0)},C=(0,d.w)((()=>{const[e,s]=(0,t.x)([]),[a,d]=(0,n.useState)(1),[h,x]=(0,n.useState)(1),[g,b]=(0,n.useState)(!1),u=(0,r.Z)(),[f,y]=(0,n.useState)(!1),[k,_]=(0,n.useState)(""),[C,Z]=(0,n.useState)(-1);(0,n.useLayoutEffect)((()=>{u&&y(!0)}),[u]);const P=async()=>{b(!0);const{data:e,last_page:i}=await c.U2(v.Z.admin.players.list(),{q:k,page:a});x(i),s((()=>e)),b(!1)};(0,n.useEffect)((()=>{P()}),[a]);const U=e=>{y("table"===e.target.value)},S=async(e,a)=>{let i;try{const{value:s}=await(0,o.K)({mode:"prompt",text:(0,l.t)("admin.changePlayerNameNotice"),input:e.name,validator:e=>{if(!e)return(0,l.t)("admin.emptyPlayerName")}});i=s}catch(e){return}const{code:n,message:d}=await c.gz(v.Z.admin.players.name(e.pid),{player_name:i});0===n?(o.A.success(d),s((e=>{e[a].name=i}))):o.A.error(d)},T=async(e,a)=>{let i;try{const{value:s}=await(0,o.K)({mode:"prompt",text:(0,l.t)("admin.changePlayerOwner"),input:e.uid.toString(),inputMode:"numeric"});i=Number.parseInt(s)}catch(e){return}const{code:n,message:d}=await c.gz(v.Z.admin.players.owner(e.pid),{uid:i});0===n?(o.A.success(d),s((e=>{e[a].uid=i}))):o.A.error(d)},A=async e=>{try{await(0,o.K)({text:(0,l.t)("admin.deletePlayerNotice"),okButtonType:"danger"})}catch(e){return}const{code:a,message:i}=await c.IV(v.Z.admin.players.delete(e.pid));0===a?(s((s=>s.filter((({pid:s})=>s!==e.pid)))),o.A.success(i)):o.A.error(i)};return(0,i.jsxs)("div",Object.assign({className:"card"},{children:[(0,i.jsxs)(m.Z,Object.assign({className:"card-header"},{children:[(0,i.jsxs)("form",Object.assign({className:"input-group",onSubmit:e=>{e.preventDefault(),P()}},{children:[(0,i.jsx)("input",{type:"text",inputMode:"search",className:"form-control",title:(0,l.t)("vendor.datatable.search"),value:k,onChange:e=>{_(e.target.value)}},void 0),(0,i.jsx)("div",Object.assign({className:"input-group-append"},{children:(0,i.jsx)("button",Object.assign({className:"btn btn-primary",type:"submit"},{children:(0,l.t)("vendor.datatable.search")}),void 0)}),void 0)]}),void 0),(0,i.jsxs)("div",Object.assign({className:"btn-group btn-group-toggle"},{children:[(0,i.jsxs)("label",Object.assign({className:"btn btn-secondary "+(f?"active":""),title:"Table Mode"},{children:[(0,i.jsx)("input",{type:"radio",value:"table",checked:f,onChange:U},void 0),(0,i.jsx)("i",{className:"fas fa-list"},void 0)]}),void 0),(0,i.jsxs)("label",Object.assign({className:"btn btn-secondary "+(f?"":"active"),title:"Card Mode"},{children:[(0,i.jsx)("input",{type:"radio",value:"card",checked:!f,onChange:U},void 0),(0,i.jsx)("i",{className:"fas fa-grip-vertical"},void 0)]}),void 0)]}),void 0)]}),void 0),0!==e.length||g?f?(0,i.jsx)("div",Object.assign({className:"card-body table-responsive p-0"},{children:(0,i.jsxs)("table",Object.assign({className:"table "+(g?"":"table-striped")},{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"PID"},void 0),(0,i.jsx)("th",{children:(0,l.t)("general.player.player-name")},void 0),(0,i.jsx)("th",{children:(0,l.t)("general.player.owner")},void 0),(0,i.jsx)("th",{children:(0,l.t)("general.player.previews")},void 0),(0,i.jsx)("th",{children:(0,l.t)("general.player.last-modified")},void 0),(0,i.jsx)("th",{children:(0,l.t)("admin.operationsTitle")},void 0)]},void 0)},void 0),(0,i.jsx)("tbody",{children:g?new Array(10).fill(null).map(((e,s)=>(0,i.jsx)(O,{},s))):e.map(((e,s)=>(0,i.jsx)(w,{player:e,onUpdateName:()=>S(e,s),onUpdateOwner:()=>T(e,s),onUpdateTexture:()=>Z(s),onDelete:()=>A(e)},e.pid)))},void 0)]}),void 0)}),void 0):(0,i.jsx)("div",Object.assign({className:"card-body d-flex flex-wrap"},{children:g?new Array(10).fill(null).map(((e,s)=>(0,i.jsx)(N,{},s))):e.map(((e,s)=>(0,i.jsx)(p,{player:e,onUpdateName:()=>S(e,s),onUpdateOwner:()=>T(e,s),onUpdateTexture:()=>Z(s),onDelete:()=>A(e)},e.pid)))}),void 0):(0,i.jsx)("div",Object.assign({className:"card-body text-center"},{children:(0,l.t)("general.noResult")}),void 0),(0,i.jsx)("div",Object.assign({className:"card-footer"},{children:(0,i.jsx)("div",Object.assign({className:"float-right"},{children:(0,i.jsx)(j.Z,{page:a,totalPages:h,onChange:d},void 0)}),void 0)}),void 0),(0,i.jsx)($,{open:C>-1,onSubmit:async(a,i)=>{const{code:n,message:d}=await c.gz(v.Z.admin.players.texture(e[C].pid),{type:a,tid:i});0===n?(o.A.success(d),s((e=>{const s=`tid_${a}`;e[C][s]=i}))):o.A.error(d)},onClose:()=>Z(-1)},void 0)]}),void 0)}))}}]);